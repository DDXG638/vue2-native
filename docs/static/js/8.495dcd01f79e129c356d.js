webpackJsonp([8],{"1pAy":function(t,n,e){"use strict";(function(t){var i=e("Dd8w"),o=e.n(i),s=e("NYxO"),a=e("x/hr");n.a={name:"login",data:function(){return{GPSLocation:{},user:{username:"",password:""}}},methods:o()({},Object(s.d)(["set_userid","set_id"]),Object(s.d)("login",["set_isLogin"]),Object(s.d)("user",["set_userInfo"]),Object(s.b)("login",["get_userPower_data","post_login"]),{loginByPassword:function(){var t=this,n=this.user.username,e=this.user.password;n.length>3&&n.length<20&&e.length>5?this.post_login(this.user).then(function(n){if(0===n.code){t.$toast({message:"登陆成功！",duration:2e3});var e=n.data,i=e.headimgurl,o=e.nickname,s=e.city,a=void 0===s?"广州":s,r=e.username,l=e._id;t.set_isLogin("psw"),t.set_userInfo({headimgurl:i,nickname:o,city:a}),t.set_userid(r),t.set_id(l),t.$router.go(-1)}else t.$toast({message:n.msg,duration:2e3})},function(){t.$toast({message:"登陆失败！",duration:2e3})}).catch(function(n){t.$toast({message:"登陆异常！",duration:2e3}),console.log(n)}):this.$toast({message:"账号密码格式不正确",duration:2e3})},login:function(n){var e=this;if(1===n){document.addEventListener("deviceready",function(){function n(n){var i=n.code;t.ajax({type:"GET",url:"https://api.weixin.qq.com/sns/oauth2/access_token?appid=wxab47f0260fabea40&secret=24950a2a032720541e0e952954dd6248&code="+i+"&grant_type=authorization_code"}).then(function(n){var i=JSON.parse(n);console.log("data1:",i);var o=i.refresh_token;t.ajax({type:"GET",url:"https://api.weixin.qq.com/sns/oauth2/refresh_token?appid=wxab47f0260fabea40&grant_type=refresh_token&refresh_token="+o}).then(function(n){var i=JSON.parse(n);console.log("data2:",i);var o=i.access_token,s=i.openid;t.ajax({type:"GET",url:"https://api.weixin.qq.com/sns/userinfo?access_token="+o+"&openid="+s}).then(function(n){var i=JSON.parse(n);console.log("data3:",i),e.set_isLogin("wx"),e.set_userInfo(i),e.set_userid(i.unionid),e.get_userPower_data(i.unionid),e.$router.go(-1),t.ajax({type:"GET",data:i,url:"http://app.toutiaojk.com/e/extend/list/appuser.php"})},function(){Toast({message:"登录失败",duration:2e3})})},function(){Toast({message:"登录失败",duration:2e3})})},function(){Toast({message:"登录失败",duration:2e3})})}function i(){Toast({message:"授权失败",duration:2e3})}cordova.exec(n,i,"Wechat","sendAuthRequest",["snsapi_userinfo"])},!1)}else this.$toast({message:"暂不支持QQ登录",duration:2e3})},get_location:function(){if("ios"===this.$store.state.device){var t=Object(a.c)();this.GPSLocation=t.coords,console.log("IOS定位",this.GPSLocation)}else this.GPSLocation=Object(a.b)(),console.log("安卓定位",this.GPSLocation)}}),mounted:function(){}}}).call(n,e("7t+N"))},"7ck0":function(t,n,e){t.exports=e.p+"static/img/qqlogin.92ba04c.png"},"8e87":function(t,n,e){t.exports=e.p+"static/img/wxlogin.7eb8171.png"},QrVH:function(t,n,e){"use strict";function i(t){e("iPSW")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("1pAy"),s=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{attrs:{id:"login"}},[i("my-header",{attrs:{fixed:"",title:"登录"}},[i("a",{staticClass:"back-white",attrs:{slot:"left"},on:{click:function(n){t.$router.go(-1)}},slot:"left"})]),t._v(" "),i("div",{staticClass:"content",class:{isIOS:"ios"==t.$store.state.device}},[i("div",{staticClass:"container"},[i("div",{staticClass:"wrapper"},[t._m(0),t._v(" "),i("ul",{staticClass:"input-box"},[i("li",{staticClass:"input-li"},[i("label",{attrs:{for:""}},[t._v("账号：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{type:"text",placeholder:"手机号/邮箱/用户名"},domProps:{value:t.user.username},on:{input:function(n){n.target.composing||t.$set(t.user,"username",n.target.value)}}})]),t._v(" "),i("li",{staticClass:"input-li"},[i("label",{attrs:{for:""}},[t._v("密码：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.user.password},on:{input:function(n){n.target.composing||t.$set(t.user,"password",n.target.value)}}})]),t._v(" "),i("span",{staticClass:"login-btn",on:{click:function(n){n.stopPropagation(),t.loginByPassword(n)}}},[t._v("登陆")]),t._v(" "),i("router-link",{attrs:{to:{name:"register"}}},[i("p",{staticClass:"register-btn"},[t._v("还没有账号？立即注册>>")])])],1),t._v(" "),t._m(1),t._v(" "),i("ul",{staticClass:"loginList"},[i("li",{staticClass:"list-item",on:{click:function(n){n.stopPropagation(),t.login(0)}}},[i("img",{attrs:{src:e("7ck0")}})]),t._v(" "),i("li",{staticClass:"list-item",on:{click:function(n){n.stopPropagation(),t.login(1)}}},[i("img",{attrs:{src:e("8e87")}})])])])])])],1)},a=[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"defaultImg"},[i("img",{attrs:{src:e("gPYd")}})])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"defaultTip"},[e("span",[t._v("其他登录方式")])])}],r={render:s,staticRenderFns:a},l=r,c=e("VU/8"),u=i,p=c(o.a,l,!1,u,null,null);n.default=p.exports},gPYd:function(t,n,e){t.exports=e.p+"static/img/members.1002f74.png"},iPSW:function(t,n,e){var i=e("tjxN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("13f1f598",i,!0,{})},tjxN:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,"\n#login {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n#login .wrapper {\n  position: absolute;\n  width: 100%;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n#login .defaultImg {\n  text-align: center;\n  width: 100%;\n  margin-bottom: 0.53rem;\n}\n#login .defaultImg img {\n  width: 2.4rem;\n  height: 2.4rem;\n}\n#login .input-box {\n  padding: 0 0.8rem;\n  margin-bottom: 0.5rem;\n}\n#login .input-box .input-li {\n  display: block;\n  padding: 0.2rem 0.5rem;\n  margin-bottom: 0.18rem;\n  border-bottom: 1px solid #dbdbdc;\n  font-size: 0.5rem;\n}\n#login .input-box .input-li input {\n  background: #f8f8f8;\n  border: none;\n  width: 5rem;\n  outline: none;\n}\n#login .input-box .input-li input::-webkit-input-placeholder {\n  font-size: 0.4rem;\n}\n#login .input-box .input-li input:-ms-input-placeholder {\n  font-size: 0.4rem;\n}\n#login .input-box .input-li input::-ms-input-placeholder {\n  font-size: 0.4rem;\n}\n#login .input-box .input-li input::placeholder {\n  font-size: 0.4rem;\n}\n#login .input-box .login-btn {\n  display: block;\n  width: 100%;\n  text-align: center;\n  line-height: 1rem;\n  background: #e4493d;\n  border-radius: 0.1rem;\n  font-weight: bold;\n  font-size: 0.5rem;\n  letter-spacing: 0.2rem;\n  color: #fff;\n}\n#login .input-box .register-btn {\n  text-align: right;\n  font-size: 0.3rem;\n  color: #dc143c;\n  margin-top: 0.2rem;\n}\n#login .defaultTip {\n  margin: 0 auto;\n  width: 50%;\n  text-align: center;\n}\n#login .defaultTip span {\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  font-size: 0.32rem;\n  color: #a9a9a9;\n  letter-spacing: 5px;\n  height: 0.8rem;\n  line-height: 0.8rem;\n}\n#login .defaultTip span:before {\n  content: '';\n  position: absolute;\n  width: 25%;\n  top: 50%;\n  left: -50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  border-top: 1px solid #a9a9a9;\n}\n#login .defaultTip span:after {\n  content: '';\n  position: absolute;\n  width: 25%;\n  top: 50%;\n  right: -50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  border-top: 1px solid #a9a9a9;\n}\n#login .loginList .list-item {\n  margin-top: 0.4rem;\n  text-align: center;\n}\n#login .loginList .list-item img {\n  width: 5.5rem;\n  height: 1.28rem;\n}\n",""])}});